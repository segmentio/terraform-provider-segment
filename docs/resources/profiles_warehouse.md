---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "segment_profiles_warehouse Resource - terraform-provider-segment"
subcategory: ""
description: |-
  Configures a Profiles Sync Warehouse. For more information, visit the Segment docs https://segment.com/docs/unify/profiles-sync/overview/.
  Import
  In Terraform v1.5.0 and later, use an import block https://developer.hashicorp.com/terraform/language/import with <space_id>:<warehouse_id>. For example:
  
  import {
    to = segment_profiles_warehouse.example
    id = "<space_id>:<warehouse_id>"
  }
  
  Otherwise, use terraform import with <space_id>:<warehouse_id>. For example:
  
  terraform import segment_profiles_warehouse.example <space_id>:<warehouse_id>
---

# segment_profiles_warehouse (Resource)

Configures a Profiles Sync Warehouse. For more information, visit the [Segment docs](https://segment.com/docs/unify/profiles-sync/overview/).

## Import

In Terraform v1.5.0 and later, use an [import block](https://developer.hashicorp.com/terraform/language/import) with `<space_id>:<warehouse_id>`. For example:

```terraform
import {
  to = segment_profiles_warehouse.example
  id = "<space_id>:<warehouse_id>"
}
```

Otherwise, use `terraform import` with `<space_id>:<warehouse_id>`. For example:

```console
terraform import segment_profiles_warehouse.example <space_id>:<warehouse_id>
```

## Example Usage

```terraform
# Configures a specific profiles sync warehouse
resource "segment_profiles_warehouse" "example" {
  space_id    = "cba321"
  metadata_id = "abc123"
  enabled     = true
  settings = jsonencode({
    token : "zyx321"
  })
  name = "My Terraform Warehouse!"
}
```

## Schema Name Handling

The `schema_name` attribute includes special handling to prevent API failures:

- **When updating**: The `schema_name` is only sent to the Segment API if it differs from the current remote value
- **When unchanged**: If the local and remote `schema_name` values are the same (including both being null/undefined), the field is omitted from the API request
- **When different**: If either the local or remote value is null/undefined while the other has a value, or if they have different values, the field is included in the API request

**Important**: The Segment API fails when you send a `schema_name` that already exists in the warehouse configuration, even though it should be a no-operation. This behavior prevents those API failures while still allowing legitimate schema name changes.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metadata_id` (String) The Warehouse metadata to use.
- `settings` (String) A key-value object that contains instance-specific settings for a Warehouse.
			
			 Different kinds of Warehouses require different settings. The required and optional settings
			 for a Warehouse are described in the 'options' object of the associated Warehouse metadata.
			
			 You can find the full list of Warehouse metadata and related settings information in the
			 '/catalog/warehouses' endpoint.
			 
			 Only settings included in the configuration will be managed by Terraform.
- `space_id` (String) The Space id.

### Optional

- `enabled` (Boolean) Enable to allow this Warehouse to receive data. Defaults to true.
- `name` (String) An optional human-readable name for this Warehouse.
- `schema_name` (String) The custom schema name that Segment uses on the Warehouse side. The space slug value is default otherwise.
  
  **Note:** When updating a profiles warehouse, the `schema_name` is only sent to the Segment API if it differs from the current remote value. This prevents API failures that occur when sending a schema name that already exists in the warehouse configuration.

### Read-Only

- `id` (String) The id of the Warehouse.
